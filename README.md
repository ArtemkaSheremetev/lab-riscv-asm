# Лабораторная работа 1 — RISC-V ASM & C

**Студент:** Артём Шереметьев  
**Вариант задания:** Нахождение строки с наибольшей суммой элементов в матрице и вывод этой суммы.  

## Описание работы

В рамках лабораторной работы 1 был выполнен анализ и программирование на языке RISC-V ASM и на языке C. Основная цель задания — разработка программы, которая:  

1. Загружает матрицу размером N × M.  
2. Находит сумму элементов каждой строки.  
3. Определяет строку с наибольшей суммой.  
4. Выводит эту максимальную сумму в консоль.  

Работа выполнялась как на языке C, так и на ассемблере, что позволило изучить:  

- базовые инструкции RISC-V, работу с регистрами и памятью;  
- циклы и ветвления на уровне ассемблера;  
- системные вызовы для вывода результата;  
- организацию программы на C и взаимодействие с низкоуровневым кодом.

## Соответствие C-кода и RISC-V инструкций

Пример функции `process` на C:

```c
void process(int n, int m, int matrix[M][N], int* result){
    int max = 0;
    int temp_max = 0;
    for(int i = 0; i < m; ++i){
        temp_max = 0;
        for(int j = 0; j < n; ++j)
            temp_max += matrix[i][j];
        if(temp_max > *result)
            max = temp_max;
    }
    *result = max;
}

```
#Дизассемблированная версия функции process:
```asm
00010140 <process>:
   10140:	fd010113          	addi	sp,sp,-48      # Создание стекового фрейма
   10144:	02812623          	sw	s0,44(sp)       # Сохранение регистра s0
   10148:	03010413          	addi	s0,sp,48
   1014c:	fca42e23          	sw	a0,-36(s0)      # Сохранение аргументов
   10150:	fcb42c23          	sw	a1,-40(s0)
   10154:	fcc42a23          	sw	a2,-44(s0)
   10158:	fcd42823          	sw	a3,-48(s0)
   10178:	fe442783          	lw	a5,-28(s0)       # Индекс строки i
   1017c:	00479793          	slli	a5,a5,0x4       # i * sizeof(row)
   10180:	fd442703          	lw	a4,-44(s0)       # адрес матрицы
   10184:	00f70733           add a4,a4,a5       # смещение к нужной строке
   10188:	fe042783           lw	a5,-32(s0)       # индекс столбца j
   1018c:	00279793           slli	a5,a5,0x2       # j * sizeof(int)
   10190:	00f707b3           add a5,a4,a5       # адрес matrix[i][j]
   10194:	0007a783           lw	a5,0(a5)         # загрузка элемента
   101a0:	fef42423          	sw	a5,-24(s0)       # temp_max = сумма строки
   101b0:	fe042703           lw	a4,-32(s0)
   101b8:	fcf740e3          	blt	a4,a5,10178     # цикл по столбцам
   101c0:	fe042783           lw	a5,-48(s0)
   101c4:	0007a783           lw	a5,0(a5)         # загрузка текущего max
   101c8:	00e7d663           bge	a5,a4,101d4     # проверка условия if(temp_max > max)
   101d0:	fef42623          	sw	a5,-20(s0)       # обновление max
   101ec:	fef42223          	sw	a5,-28(s0)
   101f4:	00e7a023           sw	a4,0(a5)         # запись результата в result
   10204:	00008067           ret
```
Пояснение
lw и sw — загрузка и запись слов из/в память.
addi, slli, add — арифметические операции, вычисление смещений элементов матрицы.
blt, bge — ветвления для циклов и условий (for, if).
Стек используется для хранения локальных переменных и аргументов функции.
Каждая строка C-кода с циклами и суммированием напрямую транслируется в несколько RISC-V инструкций.


